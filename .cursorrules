ğŸ­ DWP Frontend Unified Enterprise Rules (v1.6.1 - Final)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸŒŒ Project Identity & Architecture
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Core: React + TypeScript (Strict Mode í•„ìˆ˜)
- Structure: Nx Monorepo ê¸°ë°˜ Micro Frontend ì•„í‚¤í…ì²˜

- MFE Runtime:
  - í˜„ì¬ëŠ” Vite ê¸°ë°˜ Host/Remote ë¡œë”© êµ¬ì¡°ë¥¼ ì‚¬ìš©í•œë‹¤.
  - Webpack Module Federation ë„ì…/ì ìš© ì‹œ ë²”ìœ„, ë…¸ì¶œ ëª¨ë“ˆ, ë²„ì „ ì •ì±…ì„ ë¬¸ì„œë¡œ ê³ ì§€í•´ì•¼ í•œë‹¤.

- Host (apps/dwp):
  - ì‹œìŠ¤í…œì˜ Shell ì—­í• 
  - Sidebar, Header, Auth(ì¸ì¦/ì¸ê°€), Tenant ì‹ë³„, Global Policy ë‹¨ì¼ ì†Œìœ 

- Remote (apps/remotes/*):
  - ê°œë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë“ˆ
  - âŒ ìì²´ Header / Sidebar / Global Layout ì¤‘ë³µ êµ¬í˜„ ì ˆëŒ€ ê¸ˆì§€
  - Hostê°€ ì œê³µí•˜ëŠ” Layout/Theme/Auth ì •ì±…ì„ ë°˜ë“œì‹œ ë”°ë¥¸ë‹¤.

- Lib Ownership:
  - ê³µí†µ UI: libs/design-system
  - ê³µí†µ ë¹„ì¦ˆë‹ˆìŠ¤/ì¸ì¦/ê¶Œí•œ/ìœ í‹¸: libs/shared-utils

âœ… React Version Policy (Latest Only)
- Core ReactëŠ” ë°˜ë“œì‹œ ìµœì‹  Stable Majorë¥¼ ì‚¬ìš©í•œë‹¤.
  - React: ^19.x
  - React-DOM: ^19.x
- ì‹ ê·œ ê°œë°œ ë° ê³µí†µ ì»´í¬ë„ŒíŠ¸ëŠ” React 19 ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•œë‹¤.
- React 18 fallback / polyfill ì „ì œì˜ ì½”ë“œëŠ” ê¸ˆì§€í•œë‹¤.
- package.json ì˜ì¡´ì„±ì—ì„œ react/react-dom ë²„ì „ì´ 18ë¡œ ë‚´ë ¤ê°€ë©´ PR Reject ì²˜ë¦¬í•œë‹¤.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ›  UI / UX & Responsive Standard
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- UI Library: MUI v5 ONLY
  âŒ shadcn/ui, Radix UI, AntD, Chakra ë“± íƒ€ UI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ê¸ˆì§€

- Styling:
  - MUI System(sx, styled) + Emotion ì‚¬ìš©
  - TailwindëŠ” ë ˆì´ì•„ì›ƒ ë³´ì¡°ìš©ìœ¼ë¡œë§Œ ì œí•œì  í—ˆìš©(ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ë§ ì£¼ë„ ê¸ˆì§€)

- Icons:
  - Iconify (@iconify/react) ONLY
  âŒ Lucide, Heroicons, MUI Icons ì§ì ‘ ì‚¬ìš© ê¸ˆì§€

- Theme:
  - Hostì˜ ThemeProviderë¥¼ ëª¨ë“  Remoteê°€ ìƒì†
  - Dark / Light Mode ì‹¤ì‹œê°„ ë™ê¸°í™” í•„ìˆ˜

- Responsive:
  - Mobile-First ì „ëµ ì¤€ìˆ˜
  - MUI breakpoint(xs, sm, md) ê¸°ì¤€ ì‚¬ìš©
  - í„°ì¹˜ íƒ€ê²Ÿ ìµœì†Œ 44x44px ë³´ì¥

- Hybrid Bridge:
  - í•˜ì´ë¸Œë¦¬ë“œ ì•±(WebView) ëŒ€ì‘ì„ ìœ„í•´ window.ReactNativeWebView ë“± ë„¤ì´í‹°ë¸Œ í†µì‹  ì¸í„°í˜ì´ìŠ¤ëŠ”
    ë°˜ë“œì‹œ libs/shared-utilsì— ì¶”ìƒí™”í•˜ì—¬ êµ¬í˜„í•œë‹¤.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§­ Navigation & Menu (RBAC + Menu Tree Contract)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Sidebar Menu Source of Truth:
  - Sidebar ë©”ë‰´ íŠ¸ë¦¬ëŠ” ë°˜ë“œì‹œ ë°±ì—”ë“œ Menu Tree APIë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë Œë”ë§í•œë‹¤.
  - âœ… í‘œì¤€ API: GET /api/auth/menus/tree
  - âŒ í”„ë¡ íŠ¸ì—ì„œ menu.* dotted keyë¥¼ íŒŒì‹±í•˜ì—¬ íŠ¸ë¦¬ë¥¼ "ì¶”ë¡ "í•˜ëŠ” ë°©ì‹ì€ ì„ì‹œ Hotfix ì™¸ ê¸ˆì§€í•œë‹¤.

- Menu Tree Rendering Rules:
  - ì‘ë‹µìœ¼ë¡œ ë°›ì€ children íŠ¸ë¦¬ë¥¼ ê·¸ëŒ€ë¡œ Sidebarì—ì„œ ê³„ì¸µ ë Œë”ë§í•œë‹¤.
  - ì •ë ¬ì€ sortOrder ì˜¤ë¦„ì°¨ìˆœì„ ê¸°ë³¸ìœ¼ë¡œ í•œë‹¤.
  - sortOrderê°€ ì—†ìœ¼ë©´ menuName ì•ŒíŒŒë²³ ìˆœ fallback ì •ë ¬ì„ ì‚¬ìš©í•œë‹¤.
  - ë¶€ëª¨ ë©”ë‰´ê°€ pathê°€ ì—†ì„ ê²½ìš°:
    - ê¸°ë³¸ ì •ì±…: ì²« ë²ˆì§¸ í—ˆìš© childì˜ pathë¡œ fallback ì´ë™ì„ ì§€ì›í•œë‹¤.

- Permission Responsibility Split:
  - Sidebar ë…¸ì¶œ: menus/tree API ê¸°ë°˜ (ì´ë¯¸ ê¶Œí•œ í•„í„°ê°€ ë°˜ì˜ëœ íŠ¸ë¦¬)
  - ë²„íŠ¼/ì»´í¬ë„ŒíŠ¸ ì œì–´: /api/auth/permissions ê¸°ë°˜(UI_COMPONENT ë“±)

- Route Protection:
  - Sidebarì—ì„œ ìˆ¨ê²¨ì ¸ë„ ì§ì ‘ URL ì ‘ê·¼ì€ ê°€ëŠ¥í•˜ë¯€ë¡œ
    ëª¨ë“  ë³´í˜¸ ë¼ìš°íŠ¸ëŠ” PermissionRouteGuard/AuthGuardë¡œ ì´ì¤‘ ë°©ì–´í•œë‹¤.

- Menu Keys & Resource Keys:
  - menuKey / resourceKeyëŠ” ë°˜ë“œì‹œ ìœ ì¼í•˜ë©° ë°±ì—”ë“œ í‚¤ì™€ ì¼ì¹˜í•´ì•¼ í•œë‹¤.
  - í”„ë¡ íŠ¸ì—ì„œ í•˜ë“œì½”ë”©ëœ ë©”ë‰´ keyëŠ” ìµœì†Œí™”í•˜ë©° í•„ìš”í•œ ê²½ìš° docsì— ê·¼ê±°ë¥¼ ë‚¨ê¸´ë‹¤.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§  Agentic AI Integration (Aura Rules)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Streaming:
  - fetch + ReadableStream ê¸°ë°˜ SSE ì‚¬ìš©
  - polling / websocket ì„ì˜ ë„ì… ê¸ˆì§€

- Thought Trace:
  - ì¶”ë¡  ê³¼ì •(Thought)ê³¼ ìµœì¢… ê²°ê³¼(Result)ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë¶„ë¦¬

- HITL (Human-in-the-loop):
  - ìŠ¹ì¸ ìš”ì²­ì€ ì „ìš© Modal ë˜ëŠ” Notificationìœ¼ë¡œ ëª…í™•íˆ í‘œì‹œ
  - ì‚¬ìš©ì ìŠ¹ì¸/ê±°ì ˆ í›„ì—ë§Œ ìŠ¤íŠ¸ë¦¬ë° ì¬ê°œ

- Context Awareness:
  - ì§ˆë¬¸ ì‹œ ë°˜ë“œì‹œ ì•„ë˜ ì»¨í…ìŠ¤íŠ¸ ìë™ í¬í•¨
    - tenantId, userId, appId, current route / selection

- SSE Event Contract:
  - ëª¨ë“  SSE ì´ë²¤íŠ¸ íƒ€ì…ì€ libs/shared-utils/... ì— union typeìœ¼ë¡œ ëª…í™•íˆ ì •ì˜í•œë‹¤.
  - UIëŠ” ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ í•´ì„í•˜ì§€ ë§ê³  reducer/handlerë¥¼ í†µí•´ì„œë§Œ ë°˜ì˜í•œë‹¤.
  - unknown ì´ë²¤íŠ¸ëŠ” ë¬´ì‹œ + ë¡œê·¸ ì²˜ë¦¬í•œë‹¤.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“œ Development & Coding Standards
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Component:
  - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ ì‚¬ìš©: `export const Component = () => {}`

- Logic Separation:
  - UI ì»´í¬ë„ŒíŠ¸ ë‚´ ë³µì¡í•œ ë¡œì§ ê¸ˆì§€
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ Custom Hook ë˜ëŠ” libsë¡œ ë¶„ë¦¬

- State Management:
  - ì „ì—­ UI ìƒíƒœ: Zustand
  - ì„œë²„ ë°ì´í„°: TanStack Query

- TanStack Query Rules:
  - queryKeyëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ì •ì˜í•œë‹¤.
  - API í˜¸ì¶œì€ ì•„ë˜ ê³„ì¸µì„ ë°˜ë“œì‹œ ë”°ë¥¸ë‹¤:
    shared-utils/api â†’ shared-utils/queries â†’ hooks â†’ pages/components

- API Client:
  - libs/shared-utilsì˜ axiosInstance(fetch wrapper) í•„ìˆ˜ ì‚¬ìš©
  - ApiResponse<T> ê·œê²© ì¤€ìˆ˜

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§¹ Lint Auto-Fix Standard (Imports / Switch / Shadow)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- ë³¸ í”„ë¡œì íŠ¸ëŠ” ESLint(perfectionist/sort-imports, arrow-body-style, consistent-return ë“±) ìœ„ë°˜ì´ ìì£¼ ë°œìƒí•˜ë¯€ë¡œ
  â€œìˆ˜ì • ìš”ì²­ ë°˜ë³µâ€ ë°©ì§€ë¥¼ ìœ„í•´ ì•„ë˜ë¥¼ ìš´ì˜ í‘œì¤€ìœ¼ë¡œ ê°•ì œí•œë‹¤.

1) Import ì •ë ¬ì€ ìˆ˜ë™ ê¸ˆì§€, ìë™ Fixê°€ ì •ë‹µ
- âŒ import ìˆœì„œ/ê³µë°±/ê·¸ë£¹ì„ ì‚¬ëŒì´ ë§ì¶”ë ¤ê³  í•˜ì§€ ì•ŠëŠ”ë‹¤.
- âœ… íŒŒì¼ ì €ì¥ ì‹œ ESLint auto-fixê°€ ë°˜ë“œì‹œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•œë‹¤.
- âœ… PR/ì»¤ë°‹ ì „ ë°˜ë“œì‹œ lint --fixë¥¼ í†µê³¼í•œë‹¤.

2) Import ì •ë ¬ ê·œì¹™(ìš”ì•½)
- react ê´€ë ¨ importê°€ í•­ìƒ ìµœìƒë‹¨
- ê·¸ ë‹¤ìŒ external(@mui/* í¬í•¨) â†’ internal(@dwp-frontend/*, libs/*) â†’ relative(./, ../) ìˆœì„œ
- ë™ì¼ ê·¸ë£¹ ë‚´ëŠ” ì•ŒíŒŒë²³ ì •ë ¬
- type importëŠ” value importë³´ë‹¤ ì•ì— ì˜¤ë„ë¡ ìœ ì§€

3) Switch / Reducer ê·œì¹™
- switchì—ëŠ” ë°˜ë“œì‹œ default case í¬í•¨(default-case)
- reducerëŠ” ëª¨ë“  ë¶„ê¸°ì—ì„œ Stateë¥¼ return í•´ì•¼ í•œë‹¤(consistent-return)
- action ì²˜ë¦¬ ë¶ˆê°€ ì¼€ì´ìŠ¤ëŠ” `return state`ë¡œ ì¢…ë£Œ

4) no-shadow ê·œì¹™
- ìƒìœ„ ìŠ¤ì½”í”„ì™€ ë™ì¼ ì´ë¦„ ë³€ìˆ˜/íŒŒë¼ë¯¸í„° ì¬ì„ ì–¸ ê¸ˆì§€
  (toast/props/state ë“± í”í•œ ì´ë¦„ ì£¼ì˜)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”§ Path Alias & Dependency Hygiene (ESLint/TS ì˜¤ë¥˜ ì¬ë°œ ë°©ì§€)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… ì•„ë˜ ê·œì¹™ì€ â€œimport/no-unresolvedâ€ ë° ë¹Œë“œ ì‹¤íŒ¨ë¥¼ ë§‰ê¸° ìœ„í•œ Hard Policyë‹¤.

1) âŒ '@/' alias ì‚¬ìš© ê¸ˆì§€ (ì›ì¹™)
- í˜„ì¬ repo í‘œì¤€ aliasê°€ '@/'ë¡œ ê³ ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ ìƒì„± ì½”ë“œê°€ ì¦‰ì‹œ ê¹¨ì§„ë‹¤.
- ë‚´ë¶€ importëŠ” ì•„ë˜ ì¤‘ í•˜ë‚˜ë§Œ í—ˆìš©:
  - Nx/TS path aliasë¡œ ì •ì˜ëœ ê³µì‹ prefix (ì˜ˆ: @dwp-frontend/* ë˜ëŠ” @shared/* ë“±)
  - ë™ì¼ feature ë‚´ë¶€ ìƒëŒ€ê²½ë¡œ(./, ../)

2) aliasë¥¼ ìƒˆë¡œ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ê²½ìš°(ì˜ˆì™¸)
- ì˜ˆì™¸ì ìœ¼ë¡œ '@/'ë¥¼ ë„ì…í•˜ë ¤ë©´:
  - root tsconfig paths + ê° app tsconfig + eslint-import-resolver ì„¤ì •ê¹Œì§€ â€œë™ì‹œì—â€ ë°˜ì˜
  - ë¬¸ì„œí™” + PRì— ì„¤ì • ë³€ê²½ í¬í•¨(ì„¤ì •ë§Œ ë„£ê³  ì½”ë“œë§Œ ì˜¬ë¦¬ëŠ” ë°©ì‹ ê¸ˆì§€)

3) ì½”ë“œ ìƒì„±(v0.app ë“±)ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ì™¸ë¶€ ì˜ì¡´ì„± ì²˜ë¦¬
- âŒ ì„ì˜ë¡œ @radix-ui/*, shadcn/ui, lucide-react, class-variance-authority, tailwind-merge ë“± ì¶”ê°€ ê¸ˆì§€
  (ìš°ë¦¬ í”„ë¡œì íŠ¸ UI í‘œì¤€ ìœ„ë°˜ì´ë©°, ë¯¸ì„¤ì¹˜ ì‹œ eslint/build ì‹¤íŒ¨ ì›ì¸)
- ìƒì„± ì½”ë“œê°€ ì™¸ë¶€ depsë¥¼ ì „ì œí•˜ë©´ ë°˜ë“œì‹œ MUI/Iconifyë¡œ ì¹˜í™˜í•˜ê±°ë‚˜ libs/design-system ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ë¡œ êµì²´í•œë‹¤.
- â€œì„¤ì¹˜ë¡œ í•´ê²°â€ì´ ì•„ë‹ˆë¼ â€œí‘œì¤€ìœ¼ë¡œ ì¹˜í™˜â€ì´ ì •ë‹µì´ë‹¤.

4) Remote ë‚´ë¶€ì— components/ui(shadcn ìŠ¤íƒ€ì¼) í´ë” ìƒì„± ê¸ˆì§€
- ê³µí†µ UIëŠ” libs/design-systemë¡œ ì˜¬ë¦¬ê±°ë‚˜, feature/componentsì— MUI ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•œë‹¤.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”’ Authentication / Authorization / Security
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Unified Auth Ownership:
  - ì¸ì¦(Auth), 401/403 ì •ì±…ì€ Hostê°€ ë‹¨ì¼ ì†Œìœ 
  - RemoteëŠ” ë…ìì ì¸ ì¸ì¦ íë¦„ì„ êµ¬í˜„í•˜ì§€ ì•ŠëŠ”ë‹¤.

- Auth Guard:
  - ëª¨ë“  ë³´í˜¸ ë¼ìš°íŠ¸ëŠ” AuthGuard í•„ìˆ˜ ì ìš©

- Permission Guard:
  - ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ëŠ” PermissionRouteGuardë¥¼ í‘œì¤€ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
  - Sidebar ìˆ¨ê¹€ë§Œìœ¼ë¡œ ë³´ì•ˆì´ ì„±ë¦½í•œë‹¤ê³  ê°€ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.

- Unauthorized Policy:
  - 401:
    - refresh ë¡œì§ì´ ìˆìœ¼ë©´ 1íšŒ ì‹œë„ ê°€ëŠ¥
    - ì‹¤íŒ¨ ì‹œ logout + /sign-in?returnUrl=... ë¦¬ë‹¤ì´ë ‰íŠ¸
    - âŒ ë¬´í•œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë£¨í”„ ì ˆëŒ€ ê¸ˆì§€
  - 403:
    - logout ê¸ˆì§€
    - ì ‘ê·¼ ê±°ë¶€ UX(/403 í˜ì´ì§€ ë˜ëŠ” í† ìŠ¤íŠ¸)ë¡œ ì²˜ë¦¬

- Redirect Security:
  - returnUrlì€ same-origin ë‚´ë¶€ ê²½ë¡œë§Œ í—ˆìš©
  - http://, https://, // ë¡œ ì‹œì‘í•˜ëŠ” ê°’ì€ ë¬´ì‹œ

- Multi-tenancy:
  - Tenant IDëŠ” ì„œë¸Œë„ë©”ì¸ ê¸°ë°˜ ì¶”ì¶œ
  - ì „ìš© ìœ í‹¸ë¦¬í‹°ë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼

- Unified Session:
  - SSO / ì¼ë°˜ ë¡œê·¸ì¸ ëª¨ë‘ ë™ì¼ JWT ëª¨ë¸ ì‚¬ìš©

- Header Policy:
  - X-Tenant-ID, X-User-ID, X-Agent-ID í—¤ë” ìë™ ì£¼ì… ê·œì¹™ í›¼ì† ê¸ˆì§€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§© Admin CRUD Engineering Pattern (Hard Standard)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… CRUD í™”ë©´ì€ â€œìš´ì˜ ìœ ì§€ë³´ìˆ˜â€ë¥¼ ìœ„í•´ ë°˜ë“œì‹œ í‘œì¤€ ë¶„ë¦¬ êµ¬ì¡°ë¥¼ ë”°ë¥¸ë‹¤.
- PageëŠ” Orchestrationë§Œ ë‹´ë‹¹
- ë¡œì§ì€ hooks/adapters/componentsë¡œ ë¶„ë¦¬í•œë‹¤.

[Feature Folder Standard]
apps/remotes/admin/src/pages/<feature>/
- index.tsx                         # ë¼ìš°íŠ¸ ì—”íŠ¸ë¦¬(ì¡°ë¦½ only)
- types.ts                          # feature ì „ìš© íƒ€ì… ì„ ì–¸
- adapters/                         # DTO â†” UI model ë³€í™˜(ìˆœìˆ˜í•¨ìˆ˜)
- hooks/                            # ìƒíƒœ/ìœ ì¦ˆì¼€ì´ìŠ¤ ë¡œì§
- components/                       # í‘œì‹œ ì»´í¬ë„ŒíŠ¸(props ê¸°ë°˜)

[ê³„ì¸µ ê¸ˆì§€]
- page/componentì—ì„œ axios ì§ì ‘ í˜¸ì¶œ âŒ
- componentì—ì„œ query í˜¸ì¶œ âŒ

[QueryKey]
- list:   ['admin','<feature>','list', tenantId, filters...]
- detail: ['admin','<feature>','detail', tenantId, id]
- codes:  ['admin','codes','usage', tenantId, resourceKey]

[CodeUsage ê¸°ë°˜ select]
- select ì˜µì…˜ í•˜ë“œì½”ë”© ê¸ˆì§€
- useCodesByResourceQuery(resourceKey)ë¡œë§Œ ë¡œë”©
- ë§¤í•‘ ì—†ìœ¼ë©´ dropdown disabled + "ì½”ë“œ ë§¤í•‘ í•„ìš”"

[ê¶Œí•œ]
- ë¼ìš°íŠ¸: PermissionRouteGuard
- ë²„íŠ¼: PermissionGate

[ì´ë²¤íŠ¸]
- VIEW/SEARCH/FILTER/OPEN/CLOSE/SUBMIT/DOWNLOAD/CLICK í•„ìˆ˜ ì ìš©
- actionì€ UiAction íƒ€ì…(ëŒ€ë¬¸ì normalize) ê°•ì œ

[ìš´ì˜ ê°ì‚¬(Audit) ê¸°ë³¸ ì›ì¹™]
- â€œê¶Œí•œ/ì—­í• /ë©”ë‰´/ì½”ë“œâ€ì²˜ëŸ¼ ìš´ì˜ì— ì˜í–¥ì´ í° CRUDëŠ” ë³€ê²½ ì´ë ¥(Audit)ì´ í•„ìˆ˜ë‹¤.
- FEëŠ” ìˆ˜ì •/ì‚­ì œ/ì¶”ê°€ ì™„ë£Œ ì‹œ:
  - ë³€ê²½ ì£¼ì²´(userId), ëŒ€ìƒ(entityId), ë³€ê²½ ìœ í˜•(action), ë³€ê²½ ì „/í›„ í•µì‹¬ í•„ë“œ(diff)
  - ë¥¼ ì„œë²„ë¡œ ë‚¨ê¸¸ ìˆ˜ ìˆë„ë¡ ìš”ì²­ payload/endpoint ê³„ì•½ì„ ì¡´ì¤‘í•œë‹¤.
- FEì—ì„œ ì´ë ¥ì„ â€œë¡œì»¬ ë¡œê·¸ë¡œë§Œâ€ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ ê¸ˆì§€ (ì„œë²„ ê¸°ë¡ì´ Source of Truth)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§ª Testing & Quality Gate
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Unit Test:
  - libs/shared-utilsì˜ ìˆœìˆ˜ ë¡œì§ì€ Vitest í…ŒìŠ¤íŠ¸ í•„ìˆ˜
  - Auth redirect, token storage, SSE reducerëŠ” ìµœì†Œ í…ŒìŠ¤íŠ¸ ìš”êµ¬
  - menus/tree store ë°˜ì˜ ë¡œì§, fallback ì´ë™ ë¡œì§ì€ ìµœì†Œ í…ŒìŠ¤íŠ¸ ì¶”ê°€ ê¶Œì¥
  - adapters & utilsëŠ” ìµœì†Œ 1ê°œ ì´ìƒ í…ŒìŠ¤íŠ¸ í•„ìˆ˜

- Integration:
  - MSW ê¸°ë°˜ API mocking ê¶Œì¥

- E2E (ê¶Œì¥):
  - Playwrightë¡œ Host + Remote í•µì‹¬ í”Œë¡œìš° ê²€ì¦

- PR Rule:
  - ë³€ê²½ëœ ë¡œì§ì— ëŒ€ì‘ë˜ëŠ” í…ŒìŠ¤íŠ¸ ì—†ì´ ë¨¸ì§€ ê¸ˆì§€

- Package manager is Yarn-only. Any pnpm usage or switching requires a separate ADR and explicit approval.
- Mandatory checks must be run with Yarn (or corepack-activated Yarn) before PR completion.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âš ï¸ Hard Rules (Strictly Prohibited) âœ… ìœ„ë°˜ ì‹œ PR Reject
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âŒ No Any:
- any íƒ€ì… ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€
- ë¶ˆê°€í”¼í•  ê²½ìš° unknown + type guard ì‚¬ìš©

âŒ Host â†” Remote Direct Import:
- Host â†” Remote ê°„ ìƒëŒ€ ê²½ë¡œ import ì ˆëŒ€ ê¸ˆì§€
- ê³µí†µ ì½”ë“œëŠ” ë°˜ë“œì‹œ libsë¥¼ í†µí•´ì„œë§Œ ê³µìœ 

âŒ Duplicate Layout:
- Remote ë‚´ë¶€ì—ì„œ Header / Sidebar / Global Layout ì¤‘ë³µ êµ¬í˜„ ê¸ˆì§€

âŒ MFE Expose Standard:
- ëª¨ë“  RemoteëŠ” src/remote-entry.tsë¥¼ í†µí•´ì„œë§Œ ê¸°ëŠ¥ ë…¸ì¶œ
- ë©”ì¸ ì»´í¬ë„ŒíŠ¸ ëª…ì€ ë°˜ë“œì‹œ Moduleë¡œ í†µì¼

âŒ Zustand Store Isolation:
- RemoteëŠ” Hostì˜ storeë¥¼ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤
- Hostê°€ ì „ë‹¬í•œ action / interfaceë¥¼ í†µí•´ì„œë§Œ ìƒí˜¸ì‘ìš©

âŒ Menu Tree Policy Violation:
- /api/auth/menus/treeê°€ ì¡´ì¬í•˜ëŠ” í™˜ê²½ì—ì„œ dotted key íŒŒì‹±ìœ¼ë¡œ ë©”ë‰´ íŠ¸ë¦¬ë¥¼ ì„ì˜ êµ¬ì„± ê¸ˆì§€
- Menu Registry(ì •ì  í•˜ë“œì½”ë”©)ë¡œ ì „ì²´ ë©”ë‰´ë¥¼ ê³ ì •í•˜ëŠ” ë°©ì‹ ê¸ˆì§€
  (ë‹¨, ì„ì‹œ fallback ë˜ëŠ” ê°œë°œ ë‹¨ê³„ì˜ ìµœì†Œ êµ¬ì„±ì€ í—ˆìš©)

âŒ Non-Standard UI Deps:
- shadcn/ui, Radix UI, lucide-react ë“± ë„ì… ê¸ˆì§€
- ìƒì„± ì½”ë“œê°€ ìš”êµ¬í•˜ë”ë¼ë„ â€œì„¤ì¹˜ë¡œ í•´ê²°â€í•˜ì§€ ë§ê³  MUI/Iconifyë¡œ ì¹˜í™˜

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§¹ Maintainability Rules (Refactor Gate) âœ… ì¥ê¸° ì•ˆì • ìš´ì˜ ê²Œì´íŠ¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- File Size Limit (Hard):
  - ë‹¨ì¼ Page(.tsx)ëŠ” 400ë¼ì¸ ì´ˆê³¼ ê¸ˆì§€
  - ë‹¨ì¼ ComponentëŠ” 250ë¼ì¸ ì´ˆê³¼ ê¸ˆì§€
  - ì´ˆê³¼ ì‹œ ë°˜ë“œì‹œ ì±…ì„ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•œë‹¤. (ì»´íŒŒì¼ë§Œ ë˜ê²Œ ìª¼ê°œê¸° ê¸ˆì§€)

- Mandatory Split Structure (Page ê¸°ì¤€)
  - ëŒ€í˜• í™”ë©´ì€ ë°˜ë“œì‹œ ì•„ë˜ 5ê°œë¡œ ë¶„ë¦¬í•œë‹¤.
    1) page/index.tsx: ë ˆì´ì•„ì›ƒ + ì¡°ë¦½ë§Œ ë‹´ë‹¹
    2) components/: UI ì¡°ê° (FilterBar/Table/EditorModal)
    3) hooks/: ìƒíƒœ/í•µì‹¬ ë¡œì§ (useXxxTableState, useXxxEditorState ë“±)
    4) adapters/: API ì‘ë‹µ â†’ UI Model ë³€í™˜(ì •ë ¬/íŠ¸ë¦¬/ë§¤íŠ¸ë¦­ìŠ¤ í¬í•¨)
    5) types.ts: í™”ë©´ ì „ìš© íƒ€ì…/í¼ íƒ€ì… ì •ì˜

- Query / Store Layering (Strict)
  - API í˜¸ì¶œì€ ë°˜ë“œì‹œ ì•„ë˜ ê³„ì¸µë§Œ í—ˆìš©í•œë‹¤.
    shared-utils/api â†’ shared-utils/queries â†’ hooks â†’ pages/components
  - components/pageì—ì„œ axios ì§ì ‘ í˜¸ì¶œ ê¸ˆì§€

- State Normalization Rule
  - CRUD í™”ë©´ì€ ìƒíƒœë¥¼ 2ê°œë¡œ ê°•ì œ ë¶„ë¦¬í•œë‹¤.
    - TableState: ê²€ìƒ‰/í•„í„°/ì •ë ¬/í˜ì´ì§€/ì„ íƒ row
    - EditorState: ëª¨ë‹¬ open/close, form draft, mode(create/edit/view)
  - í•˜ë‚˜ì˜ store/hookì— ëª¨ë“  ìƒíƒœë¥¼ ëª°ì•„ë„£ëŠ” ë°©ì‹ ê¸ˆì§€

- UI Composition Standard (MUI)
  - ëŒ€í˜• í™”ë©´ì€ ë°˜ë“œì‹œ 3ë‹¨ UI êµ¬ì¡°ë¡œ ìœ ì§€í•œë‹¤.
    - <FilterBar />
    - <DataTable />
    - <EditorModal />

- Contract Safety
  - API/ì½”ë“œ í…Œì´ë¸”/ê¶Œí•œ ë¡œì§ ë³€ê²½ ì‹œ ë°˜ë“œì‹œ adapterì—ì„œë§Œ ë°˜ì˜
  - Page ì»´í¬ë„ŒíŠ¸ì—ì„œ response êµ¬ì¡°ë¥¼ ì§ì ‘ í•´ì„í•˜ëŠ” ì½”ë“œ ê¸ˆì§€

- Refactor Rule
  - ë¦¬íŒ©í† ë§ PRì—ì„œëŠ” ê¸°ëŠ¥ ë³€ê²½ ê¸ˆì§€
  - UI/ë™ì‘ ë™ì¼ ìœ ì§€ + êµ¬ì¡°ë§Œ ê°œì„ 
  - ì˜ˆì™¸: íƒ€ì… ì˜¤ë¥˜/ëª…ë°±í•œ ë²„ê·¸ ìˆ˜ì •ì€ í—ˆìš©

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ Code Generation(v0.app ë“±) ì‘ì—… ì§€ì‹œ í…œí”Œë¦¿ (í•„ìˆ˜ ì¤€ìˆ˜)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- ìƒì„± ê²°ê³¼ë¬¼ì€ â€œMUI v5 + Emotion + Iconifyâ€ë§Œ ì‚¬ìš©í•˜ë„ë¡ ìœ ë„í•œë‹¤.
- ì•„ë˜ ê¸ˆì§€ì‚¬í•­ì„ í”„ë¡¬í”„íŠ¸ì— ë°˜ë“œì‹œ í¬í•¨í•œë‹¤:
  - shadcn/ui, Radix UI, lucide-react, tailwind-merge, class-variance-authority ì‚¬ìš© ê¸ˆì§€
  - '@/' alias import ê¸ˆì§€
  - Remote ë‚´ë¶€ì— components/ui í´ë” ìƒì„± ê¸ˆì§€
  - APIëŠ” ì§ì ‘ í˜¸ì¶œ ê¸ˆì§€(queries/hooks ê³„ì¸µ ì¤€ìˆ˜)
- ìƒì„±ë¬¼ì´ ìœ„ë°˜í•˜ë©´: ì„¤ì¹˜ë¡œ í•´ê²°í•˜ì§€ ë§ê³  í‘œì¤€(MUI/Iconify/Design-system)ìœ¼ë¡œ ì¹˜í™˜í•œë‹¤.
