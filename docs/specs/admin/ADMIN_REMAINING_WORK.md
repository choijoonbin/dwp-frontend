# Admin 개발 후 "추가로 남는 작업" 백로그

> **작성일**: 2026-01-22  
> **목적**: Admin API 보완 완료 후 남은 운영/품질/문서/테스트/계약 관련 작업 정리  
> **관련 문서**: `docs/specs/admin/ADMIN_API_GAP_ANALYSIS.md`, `docs/api-spec/FRONTEND_API_REQUEST_ADMIN_API_COMPLETION.md`

---

## 📋 목차

1. [데이터 시딩/샘플 계정/권한 세트](#1-데이터-시딩샘플-계정권한-세트)
2. [운영 로그/감사로그 적재 정책](#2-운영-로그감사로그-적재-정책)
3. [대량 데이터 성능(인덱스/쿼리)](#3-대량-데이터-성능인덱스쿼리)
4. [배치/스케줄러 필요 여부](#4-배치스케줄러-필요-여부)
5. [캐시 전략(Redis)](#5-캐시-전략redis)
6. [장애 대응(타임아웃/서킷브레이커)](#6-장애-대응타임아웃서킷브레이커)
7. [FE E2E와 BE 통합 테스트 전략](#7-fe-e2e와-be-통합-테스트-전략)
8. [CI/CD Merge blocking 전략](#8-cicd-merge-blocking-전략)
9. [운영 배포 체크리스트](#9-운영-배포-체크리스트)

---

## 1. 데이터 시딩/샘플 계정/권한 세트

### 1.1. 개발/스테이징 환경 초기 데이터

**목적**: 개발자/QA가 바로 테스트할 수 있도록 초기 데이터 제공

**필요 데이터**:
- [ ] 기본 테넌트 (tenant_id = 1)
- [ ] 관리자 계정 (admin/admin1234!)
- [ ] 테스트 사용자 계정 5~10개
- [ ] 기본 역할 (ADMIN, USER, VIEWER)
- [ ] 기본 리소스 (menu.admin.*, menu.dashboard 등)
- [ ] 기본 메뉴 트리 (Admin 메뉴 전체)
- [ ] 기본 코드 그룹 (USER_STATUS, ROLE_STATUS, RESOURCE_TYPE 등)
- [ ] 기본 코드 (ACTIVE, INACTIVE 등)
- [ ] 코드 사용 매핑 (menu.admin.users → USER_STATUS 등)

**구현 방식**:
- [ ] SQL 스크립트 (`docs/backend-src/docker/postgres/init.sql` 확장)
- [ ] 또는 Spring Boot `@PostConstruct` 기반 시딩
- [ ] 또는 별도 시딩 스크립트 (`scripts/seed-dev-data.sh`)

**우선순위**: P1

**예상 완료일**: 2026-02-05

---

### 1.2. 테스트 계정 및 권한 설정

**목적**: 다양한 권한 시나리오 테스트

**필요 계정**:
- [ ] 전체 권한 관리자 (admin)
- [ ] 제한된 권한 관리자 (admin-limited)
- [ ] 일반 사용자 (user1, user2)
- [ ] 읽기 전용 사용자 (viewer)

**권한 매핑**:
- [ ] admin: 모든 `menu.admin.*` + `VIEW`, `EDIT` 권한
- [ ] admin-limited: `menu.admin.users`, `menu.admin.roles`만 `VIEW` 권한
- [ ] user1: `menu.dashboard`만 `VIEW` 권한
- [ ] viewer: 모든 메뉴 `VIEW`만, `EDIT` 없음

**우선순위**: P1

**예상 완료일**: 2026-02-05

---

## 2. 운영 로그/감사로그 적재 정책

### 2.1. 로그 보관 기간

**현재 상태**: 확인 필요

**요구사항**:
- [ ] 감사 로그 보관 기간 정의 (예: 1년)
- [ ] 자동 삭제 정책 (보관 기간 초과 시)
- [ ] 아카이빙 전략 (장기 보관 필요 시)

**구현 방식**:
- [ ] 배치 작업으로 오래된 로그 삭제
- [ ] 또는 DB 파티셔닝 (월별 파티션)

**우선순위**: P2

**예상 완료일**: 2026-02-20

---

### 2.2. 로그 압축/아카이빙 전략

**요구사항**:
- [ ] 오래된 로그 압축 저장
- [ ] 아카이빙 대상 선정 기준
- [ ] 복원 프로세스 정의

**우선순위**: P3

**예상 완료일**: 2026-03-01

---

## 3. 대량 데이터 성능(인덱스/쿼리)

### 3.1. 인덱스 추가 (필요 시)

**확인 필요 테이블**:
- [ ] `com_user` (keyword 검색, departmentId, status)
- [ ] `com_role` (keyword 검색, status)
- [ ] `com_resource` (keyword 검색, type, category)
- [ ] `sys_menu` (keyword 검색, parentId, enabled)
- [ ] `sys_code` (groupKey, enabled, tenantScope)
- [ ] `sys_code_usage` (resourceKey, codeGroupKey)
- [ ] `audit_log` (tenantId, actorUserId, actionType, resourceType, timestamp)

**인덱스 추가 기준**:
- [ ] WHERE 절에 자주 사용되는 컬럼
- [ ] JOIN에 사용되는 컬럼
- [ ] ORDER BY에 사용되는 컬럼

**우선순위**: P1 (성능 이슈 발생 시)

**예상 완료일**: 성능 테스트 후 결정

---

### 3.2. 쿼리 최적화

**확인 필요 쿼리**:
- [ ] 사용자 목록 조회 (N+1 문제)
- [ ] 역할 멤버 조회 (JOIN 최적화)
- [ ] 리소스 트리 조회 (재귀 쿼리 최적화)
- [ ] 메뉴 트리 조회 (재귀 쿼리 최적화)
- [ ] 감사 로그 조회 (대량 데이터 페이징)

**최적화 방법**:
- [ ] Fetch Join 사용
- [ ] Batch Size 설정
- [ ] 쿼리 결과 캐싱

**우선순위**: P1 (성능 이슈 발생 시)

**예상 완료일**: 성능 테스트 후 결정

---

## 4. 배치/스케줄러 필요 여부

### 4.1. 정기 데이터 정리

**요구사항**:
- [ ] 오래된 감사 로그 삭제 (보관 기간 초과)
- [ ] 비활성 사용자 정리 (선택적)
- [ ] 임시 데이터 정리

**구현 방식**:
- [ ] Spring Batch 사용
- [ ] 또는 Cron Job (`@Scheduled`)

**우선순위**: P2

**예상 완료일**: 2026-02-20

---

### 4.2. 통계 집계

**요구사항**:
- [ ] 일일/월간 사용자 활동 통계
- [ ] 역할별 사용자 수 집계
- [ ] 리소스별 접근 통계

**구현 방식**:
- [ ] Spring Batch 사용
- [ ] 별도 통계 테이블 생성

**우선순위**: P3

**예상 완료일**: 2026-03-01

---

## 5. 캐시 전략(Redis)

### 5.1. 메뉴 트리 캐싱

**요구사항**:
- [ ] 메뉴 트리는 자주 변경되지 않으므로 캐싱
- [ ] 메뉴 변경 시 캐시 무효화

**구현 방식**:
- [ ] Spring Cache + Redis
- [ ] `@Cacheable` / `@CacheEvict` 사용

**우선순위**: P2

**예상 완료일**: 2026-02-20

---

### 5.2. 코드 그룹 캐싱

**요구사항**:
- [ ] 코드 그룹/코드 목록 캐싱
- [ ] 코드 변경 시 캐시 무효화

**구현 방식**:
- [ ] Spring Cache + Redis
- [ ] `@Cacheable` / `@CacheEvict` 사용

**우선순위**: P2

**예상 완료일**: 2026-02-20

---

### 5.3. 권한 정보 캐싱

**요구사항**:
- [ ] 사용자 권한 정보 캐싱 (JWT 토큰과 별도)
- [ ] 권한 변경 시 캐시 무효화

**구현 방식**:
- [ ] Spring Cache + Redis
- [ ] `@Cacheable` / `@CacheEvict` 사용

**우선순위**: P2

**예상 완료일**: 2026-02-20

---

## 6. 장애 대응(타임아웃/서킷브레이커)

### 6.1. 타임아웃 설정

**요구사항**:
- [ ] DB 쿼리 타임아웃 (예: 30초)
- [ ] 외부 API 호출 타임아웃 (예: 10초)
- [ ] HTTP 요청 타임아웃 (예: 60초)

**구현 방식**:
- [ ] Spring Boot 설정 (`spring.datasource.hikari.maximum-pool-size`)
- [ ] Feign Client 타임아웃 설정

**우선순위**: P1

**예상 완료일**: 2026-02-10

---

### 6.2. 서킷브레이커 적용

**요구사항**:
- [ ] 외부 API 호출 시 서킷브레이커 적용
- [ ] DB 연결 실패 시 Fallback 처리

**구현 방식**:
- [ ] Resilience4j 사용
- [ ] 또는 Spring Cloud Circuit Breaker

**우선순위**: P2

**예상 완료일**: 2026-02-20

---

## 7. FE E2E와 BE 통합 테스트 전략

### 7.1. 전체 플로우 테스트

**요구사항**:
- [ ] 사용자 생성 → 역할 할당 → 권한 부여 → 메뉴 접근 전체 플로우
- [ ] 코드 그룹 생성 → 코드 생성 → 코드 사용 매핑 전체 플로우
- [ ] 리소스 생성 → 역할 권한 할당 → 접근 테스트

**구현 방식**:
- [ ] Playwright + Testcontainers 통합
- [ ] 또는 별도 통합 테스트 서버

**우선순위**: P1

**예상 완료일**: 2026-02-15

---

### 7.2. 권한 시나리오 테스트

**요구사항**:
- [ ] 권한 없는 사용자 접근 테스트 (403)
- [ ] 권한 있는 사용자 접근 테스트 (200)
- [ ] 권한 변경 후 즉시 반영 테스트

**구현 방식**:
- [ ] E2E 테스트에 권한 시나리오 추가

**우선순위**: P1

**예상 완료일**: 2026-02-15

---

## 8. CI/CD Merge blocking 전략

### 8.1. 테스트 통과 필수

**요구사항**:
- [ ] Unit Test 통과 필수
- [ ] Integration Test 통과 필수
- [ ] E2E Test 통과 필수 (선택적)

**구현 방식**:
- [ ] GitHub Actions / GitLab CI 설정
- [ ] 테스트 실패 시 Merge 불가

**우선순위**: P1

**예상 완료일**: 2026-02-10

---

### 8.2. 코드 커버리지 기준

**요구사항**:
- [ ] 코드 커버리지 80% 이상 유지
- [ ] 신규 코드는 90% 이상

**구현 방식**:
- [ ] JaCoCo 사용
- [ ] CI에서 커버리지 체크

**우선순위**: P2

**예상 완료일**: 2026-02-20

---

## 9. 운영 배포 체크리스트

### 9.1. DB 마이그레이션

**체크리스트**:
- [ ] 마이그레이션 스크립트 검토
- [ ] 롤백 스크립트 준비
- [ ] 백업 완료 확인

**우선순위**: P0 (배포 전 필수)

---

### 9.2. 환경 변수 설정

**체크리스트**:
- [ ] DB 연결 정보
- [ ] Redis 연결 정보
- [ ] JWT Secret Key
- [ ] 외부 API 키

**우선순위**: P0 (배포 전 필수)

---

### 9.3. 모니터링 설정

**체크리스트**:
- [ ] 애플리케이션 로그 수집
- [ ] 메트릭 수집 (Prometheus)
- [ ] 알림 설정 (에러 발생 시)

**우선순위**: P1

**예상 완료일**: 2026-02-10

---

## 📊 우선순위 요약

| 우선순위 | 항목 수 | 예상 완료일 |
|----------|---------|-------------|
| **P0** | 2개 | 배포 전 필수 |
| **P1** | 8개 | 2026-02-15 |
| **P2** | 6개 | 2026-02-20 |
| **P3** | 2개 | 2026-03-01 |

---

## 📝 진행 상황 추적

| 항목 | 상태 | 완료일 | 담당자 |
|------|------|--------|--------|
| 데이터 시딩 | ⏳ 대기 | - | - |
| 테스트 계정 | ⏳ 대기 | - | - |
| 로그 보관 정책 | ⏳ 대기 | - | - |
| 인덱스 추가 | ⏳ 대기 | - | - |
| 쿼리 최적화 | ⏳ 대기 | - | - |
| 배치 작업 | ⏳ 대기 | - | - |
| 캐시 전략 | ⏳ 대기 | - | - |
| 타임아웃 설정 | ⏳ 대기 | - | - |
| 통합 테스트 | ⏳ 대기 | - | - |
| CI/CD 설정 | ⏳ 대기 | - | - |

---

**이 문서는 Admin API 보완 완료 후 운영 준비 작업을 정리한 백로그입니다.**
